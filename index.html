<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.js"></script>
        <script src="./snake.js"></script>
    </head>
    <body>
        <script>
            var s;
            var scl = 20;

            var food; 

            function Snake() {
                this.x = 0;
                this.y = 0;
                this.xSpeed = 1;
                this.ySpeed = 0;

                this.dir = function(x,y) {
                    this.xSpeed = x;
                    this.ySpeed = y;
                }

                this.update = function() {
                    this.x += this.xSpeed*scl;
                    this.y += this.ySpeed*scl;

                    this.x = constrain(this.x, 0, width-scl);
                    this.y = constrain(this.y, 0, height-scl);
                }

                this.show = function() {
                    translate(this.x, this.y);
                    fill(255);
                        rect(0,0,scl, scl);
                    resetMatrix();
                    
                }
                
                this.eat = function(pos) {
                    var d = dist(this.x, this.y);
                }

            }

            function setup () {
                frameRate(10);
                createCanvas(500,500);
                s = new Snake();
                food = pickLocation();
            }

            function draw() {
                background(100,190);
                s.update();
                s.show();

                // s.eat();

                fill(255,0,100);
                rect(food.x, food.y, scl, scl);
            }    

            function pickLocation() {
                var cols = floor(width/scl);
                var rows = floor(height/scl);
                food = createVector(floor(random(cols)), floor(random(rows)));
                food.mult(scl);
            }
            
            function keyPressed() {
                if (keyCode === UP_ARROW) {
                    s.dir(0,-1);
                } else if (keyCode === DOWN_ARROW) {
                    s.dir(0,1);
                } else if (keyCode === LEFT_ARROW) {
                    s.dir(-1,0);
                } else if (keyCode === RIGHT_ARROW) {
                    s.dir(1,0);
                }
            }
        </script>
    </body>
</html>